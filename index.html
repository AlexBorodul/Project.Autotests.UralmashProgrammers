<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ИИ Платформа Генерации Автотестов</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="/static/scripts.js" defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1 class="title">Платформа Генерации Автотестов</h1>
    </header>
    <main>
        <section class="upload-section">
            <form id="uploadForm" enctype="multipart/form-data">
                <label class="input-file">
                    <input type="file" name="file" id="fileInput">
                    <span>Выберите файл</span>
                </label>
                <div class="button-wrapper">
                    <button type="button" onclick="sendFile()" class="button">Отправить</button>
                </div>
                <div id="fileName">Название файла появится здесь</div>
                <div id="errorMessage"></div>
                <script>
                    // Добавляем обработчик для выбора файла
                    document.getElementById("fileInput").addEventListener("change", function (event) {
                        const file = event.target.files[0]; // Получаем выбранный файл
                        const fileNameElement = document.getElementById("fileName"); // Элемент для отображения имени файла
                        const errorMessageElement = document.getElementById("errorMessage"); // Элемент для отображения ошибки

                        if (file) {
                            const fileName = file.name; // Имя файла
                            const fileExtension = fileName.split('.').pop().toLowerCase(); // Расширение файла

                            if (fileExtension === "docx" || fileExtension === "pdf") {
                                // Устанавливаем имя файла и очищаем сообщение об ошибке
                                fileNameElement.textContent = `Выбранный файл: ${fileName}`;
                                errorMessageElement.textContent = "";
                            } else {
                                // Показываем сообщение об ошибке и очищаем имя файла
                                errorMessageElement.textContent = "Требуется файл с другим форматом (.docx или .pdf)";
                                fileNameElement.textContent = "";
                            }
                        } else {
                            // Сбрасываем текст, если файл не выбран
                            fileNameElement.textContent = "";
                            errorMessageElement.textContent = "";
                        }
                    });
                </script>
            </form>
        </section>
        <div class="button-wrapper">
            <button onclick="saveResponsesToFile()">Сохранить ответы в формате .txt</button>
        </div>
        <section id="responseContainer" class="answer">
            <p class="responseAnswer">Ответ сервера появится здесь</p>
        </section>
        <section>
            <div id="toggleContainer"></div>
            <div id="chatInterface" style="display: none;">
                <textarea id="chatInput" placeholder="Введите ваше сообщение"></textarea>
                <button onclick="sendChatMessage()">Отправить сообщение</button>
            </div>
        </section>
    </main>
    <footer>
        <p>Uralmash Programmers</p>
    </footer>
</body>
</html>
